name: Keep Streamlit Alive

on:
  workflow_dispatch:
  schedule:
    - cron: "*/3 * * * *"

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping app with browser-like headers
        run: |
          curl -f -s -L --max-time 30 --retry 2 --retry-delay 1 \
            -H "User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" \
            -H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" \
            -H "Accept-Language: en-US,en;q=0.9" \
            -H "Connection: keep-alive" \
            https://maggendemo-bgml8eg9b8b7rhocqbwzjy.streamlit.app/ || echo "First request failed, continuing..."
          sleep 2
          curl -f -s -L --max-time 30 --retry 2 --retry-delay 1 \
            -H "User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" \
            -H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" \
            https://maggendemo-bgml8eg9b8b7rhocqbwzjy.streamlit.app/ || echo "Second request failed, continuing..."


